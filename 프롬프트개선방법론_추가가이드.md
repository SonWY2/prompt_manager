# 프롬프트 개선 방법론 추가 가이드

## 📋 개요

이 문서는 Prompt Manager의 프롬프트 개선 기능에 새로운 개선 방법론을 추가하는 방법을 안내합니다.

### 프롬프트 개선 기능이란?

사용자가 작성한 프롬프트를 LLM을 활용하여 자동으로 개선하는 기능입니다. 미리 정의된 개선 방법론(명확성 개선, 구조화, 구체화 등)을 선택하거나 커스텀 지침을 입력하여 프롬프트를 향상시킬 수 있습니다.

### 관련 파일 구조

```
prompt_manager/
├── src/
│   ├── config/
│   │   └── prompt_improvement_templates.yaml  ← 개선 방법론 정의 파일
│   └── gui/
│       ├── utils/
│       │   └── prompt_improvement.py          ← 관리 클래스
│       └── widgets/
│           ├── prompt_editor.py               ← 메인 에디터
│           └── prompt_improvement_dialog.py   ← 선택 다이얼로그
```

---

## 🚀 새로운 개선 방법론 추가하기 (단계별)

### Step 1: YAML 파일 열기

```bash
src/config/prompt_improvement_templates.yaml
```

파일을 텍스트 에디터로 엽니다.

### Step 2: 새 항목 추가 위치 확인

파일 구조:
```yaml
improvement_methods:
  - id: "clarity"
    name: "명확성 개선"
    ...
  - id: "structure"
    name: "구조화"
    ...
  # 여기에 새로운 항목 추가!
  
custom_template:
  # 이 부분은 수정하지 않음
```

**중요:** `improvement_methods` 리스트 내에 추가하며, `custom_template` 섹션은 건드리지 않습니다.

### Step 3: 새 개선 방법론 작성

다음 템플릿을 사용하여 새 항목을 추가합니다:

```yaml
  - id: "your_method_id"
    name: "표시될 이름"
    description: "방법론 설명"
    icon: "🎯"
    template: |
      여기에 개선 지침을 작성합니다.
      
      {main_prompt}
      
      개선된 프롬프트만 출력해주세요:
```

### Step 4: 필수 필드 작성

각 필드를 다음 가이드라인에 따라 작성합니다:

| 필드 | 필수 | 설명 | 예시 |
|------|------|------|------|
| `id` | ✅ | 고유 식별자 (영문, 소문자, 언더스코어) | `"simplify"` |
| `name` | ✅ | UI에 표시될 이름 (한글 가능) | `"간결화"` |
| `description` | ✅ | 방법론 설명 (20-30자 권장) | `"불필요한 내용을 제거하고 간결하게 만듭니다"` |
| `icon` | ✅ | 이모지 아이콘 (1개) | `"✂️"` |
| `template` | ✅ | 개선 지침 프롬프트 | 아래 참조 |

### Step 5: 애플리케이션 재시작

파일을 저장한 후 Prompt Manager를 재시작하면 새로운 방법론이 자동으로 목록에 추가됩니다.

---

## 📝 템플릿 작성 가이드

### {main_prompt} 변수

- **필수:** 템플릿에 반드시 `{main_prompt}`를 포함해야 합니다
- **역할:** 사용자가 작성한 원본 프롬프트가 이 위치에 자동으로 삽입됩니다
- **예시:**

```yaml
template: |
  아래 프롬프트를 개선해주세요:
  
  {main_prompt}
  
  개선된 결과:
```

### 효과적인 개선 지침 작성 팁

#### ✅ 좋은 예시
```yaml
template: |
  아래 프롬프트를 간결하게 만들어주세요.
  
  개선 기준:
  - 불필요한 수식어 제거
  - 중복 표현 삭제
  - 핵심 내용만 유지
  
  원본 프롬프트:
  {main_prompt}
  
  개선된 프롬프트만 출력해주세요 (설명 없이):
```

#### ❌ 피해야 할 예시
```yaml
template: |
  이걸 좀 고쳐줘: {main_prompt}
```

### 권장 구조

```yaml
template: |
  [1. 작업 지시]
  아래 프롬프트를 [목적]으로 개선해주세요.
  
  [2. 개선 기준 (선택)]
  개선 시 다음을 고려하세요:
  - 기준 1
  - 기준 2
  - 기준 3
  
  [3. 원본 프롬프트]
  원본 프롬프트:
  {main_prompt}
  
  [4. 출력 지시]
  개선된 프롬프트만 출력해주세요 (설명 없이):
```

---

## 💡 실전 예시

### 예시 1: "간결화" 방법론 추가

```yaml
  - id: "simplify"
    name: "간결화"
    description: "불필요한 내용을 제거하고 핵심만 남깁니다"
    icon: "✂️"
    template: |
      아래 프롬프트를 간결하게 만들어주세요.
      
      개선 시 다음을 수행하세요:
      - 불필요한 수식어와 반복 제거
      - 장황한 설명을 핵심 문장으로 축약
      - 중복된 지시사항 통합
      - 핵심 메시지는 유지
      
      원본 프롬프트:
      {main_prompt}
      
      개선된 프롬프트만 출력해주세요 (설명 없이):
```

### 예시 2: "전문성 강화" 방법론 추가

```yaml
  - id: "professional"
    name: "전문성 강화"
    description: "전문적이고 격식있는 톤으로 변경합니다"
    icon: "🎓"
    template: |
      아래 프롬프트를 전문적인 톤으로 개선해주세요.
      
      개선 기준:
      - 격식있는 어휘 사용
      - 전문 용어 적절히 활용
      - 명확하고 권위있는 표현
      - 비즈니스/학술적 맥락에 적합하게
      
      원본 프롬프트:
      {main_prompt}
      
      개선된 프롬프트만 출력해주세요 (설명 없이):
```

### 예시 3: "친근한 톤" 방법론 추가

```yaml
  - id: "friendly"
    name: "친근한 톤"
    description: "부드럽고 대화하기 쉬운 톤으로 만듭니다"
    icon: "😊"
    template: |
      아래 프롬프트를 친근하고 부드러운 톤으로 개선해주세요.
      
      개선 시 다음을 적용하세요:
      - 딱딱한 표현을 부드럽게
      - 명령조를 요청조로 변경
      - 친근한 어투 사용
      - 과도하게 캐주얼하지 않게 균형 유지
      
      원본 프롬프트:
      {main_prompt}
      
      개선된 프롬프트만 출력해주세요 (설명 없이):
```

---

## ⚠️ 주의사항

### 1. YAML 문법 지키기

```yaml
# ✅ 올바른 들여쓰기
  - id: "test"
    name: "테스트"
    template: |
      내용

# ❌ 잘못된 들여�기
  - id: "test"
  name: "테스트"
  template: |
    내용
```

### 2. 고유한 ID 사용

- 중복된 ID 사용 시 오류 발생
- 영문 소문자와 언더스코어만 사용
- 의미있는 이름 권장

```yaml
# ✅ 좋은 ID
id: "simplify_tone"
id: "add_context"

# ❌ 나쁜 ID
id: "method1"
id: "새로운_방법"  # 한글 X
id: "simple-tone"  # 하이픈 X
```

### 3. {main_prompt} 필수 포함

```yaml
# ✅ 올바른 사용
template: |
  개선해주세요:
  {main_prompt}

# ❌ 잘못된 사용
template: |
  프롬프트를 개선해주세요
  # {main_prompt} 없음!
```

### 4. 아이콘 선택

- 1개의 이모지만 사용
- 방법론의 성격을 잘 나타내는 것 선택
- 기존 방법론과 중복되지 않는 것 권장

```yaml
# ✅ 좋은 아이콘
icon: "✂️"  # 간결화
icon: "🎯"  # 목표 지향
icon: "🔬"  # 분석적

# ❌ 나쁜 아이콘
icon: "🔥🔥"  # 2개 이상
icon: "test"  # 이모지가 아님
```

---

## 🎯 팁과 모범 사례

### 1. 명확한 지시사항

개선 지침은 LLM이 정확히 이해할 수 있도록 명확하게 작성합니다.

```yaml
# ✅ 명확함
template: |
  아래 프롬프트에서 모호한 표현을 구체적으로 변경해주세요.
  예: "좋은" → "효율적이고 사용자 친화적인"

# ❌ 모호함
template: |
  프롬프트를 좀 더 좋게 만들어줘
```

### 2. 단계별 지침

복잡한 개선의 경우 단계별로 나누어 제시합니다.

```yaml
template: |
  다음 단계로 프롬프트를 개선해주세요:
  
  1단계: 목적과 맥락 추가
  2단계: 구조화 및 순서 정리
  3단계: 예시와 제약사항 명시
  
  원본 프롬프트:
  {main_prompt}
```

### 3. 일관된 출력 요청

모든 템플릿의 마지막에는 출력 형식을 명확히 지정합니다.

```yaml
# 권장
개선된 프롬프트만 출력해주세요 (설명 없이):

# 또는
개선된 프롬프트:
[여기에 개선된 내용만 작성]
```

### 4. 테스트와 반복

- 새 방법론을 추가한 후 다양한 프롬프트로 테스트
- 기대한 결과가 나오지 않으면 지침을 조정
- 다른 사용자의 피드백 수집

---

## 📚 기존 방법론 참고

현재 구현된 방법론들을 참고하여 새로운 방법론을 설계할 수 있습니다:

1. **명확성 개선** (clarity) - 모호한 표현 → 구체적 표현
2. **구조화** (structure) - 논리적 구조 정리
3. **구체화** (detail) - 세부사항과 예시 추가
4. **역할/컨텍스트 추가** (role_context) - AI 역할 정의
5. **사고 과정 유도** (chain_of_thought) - 단계별 사고 유도
6. **오류 처리 추가** (error_handling) - 예외 상황 처리

이들을 조합하거나 변형하여 새로운 방법론을 만들 수 있습니다.

---

## 🔧 문제 해결

### 새 방법론이 표시되지 않음

1. YAML 문법 오류 확인 (들여쓰기, 콜론 등)
2. 애플리케이션 재시작 확인
3. 파일 저장 확인

### 개선 결과가 이상함

1. `{main_prompt}` 포함 여부 확인
2. 개선 지침이 명확한지 검토
3. 다른 프롬프트로 테스트

### ID 충돌 오류

- 기존 ID와 중복되지 않는 고유한 ID 사용
- 기존 방법론 목록 확인: clarity, structure, detail, role_context, chain_of_thought, error_handling

---


**버전:** 1.0.0
